---
import { Tag, tagMap } from '../scripts/tags';
import TagPill from './TagPill.astro';

export interface Props {
    tags: Tag[] | string[];
}

const { tags } = Astro.props as Props;

// Checks and converts to Tag[] if the type is string[].
let tagArray: Tag[];
const tag = tags[0];
if (!tags)
    tagArray = [];
else if (tag instanceof Tag) {
    tagArray = tags as Tag[];
}
else if (typeof tags[0] === "string") {
    tagArray = tags.map(tag => {
        const result = tagMap.get(tag as string);
        if (result)
            return result;
        else
            return Tag.ErrorTag;
    })
}
else {
    console.error("Invalid tag type");
    tagArray = [];
}
---

<div class="tag-container">
    <p>Tags:</p>
    <ul>
        {
            tagArray.map(tag => (
                <TagPill tag={tag} ifAddLink={false} />
            ))
        }
    </ul>
</div>

<style>
    .tag-container {
        display: flex;
    }
    .tag-container p {
        margin-right: 0.6em;
        font-size: 0.9em;
    }
    ul {
        display: flex;
        flex-direction: row;
        flex-wrap: wrap;
        align-content: center;
        margin: 0;
        padding: 0;
        gap: 0.3em 0.6em;
        list-style: none;
    }
</style>